# 🌳 魔法森林數學探險 🌳

一個專為國小二年級學生設計的數學闖關遊戲，透過有趣的互動方式幫助孩子學習數學。

## 📖 遊戲簡介

「魔法森林數學探險」是一個色彩鮮豔、充滿趣味的數學學習遊戲。遊戲包含 6 個不同主題的關卡，每個關卡都有「簡單」和「困難」兩種難度模式，另外還有特別的練習區域，讓孩子可以根據自己的程度選擇挑戰。

## ✨ 遊戲特色

### 🎮 六大關卡
1. **數字魔法師** 🧙‍♂️ - 加減法運算練習
2. **故事迷宮** 📖 - 應用題解題訓練
3. **乘法探險家** ✖️ - 乘法表記憶與運算
4. **大小魔王戰** ⚔️ - 數字大小比較
5. **錢幣大富翁** 💰 - 錢幣計算與應用
6. **時間魔法鐘** 🕐 - 時鐘讀取練習

### 🔥 特別練習區
- **九九乘法王** 🔢 - 無限練習模式，專業九九乘法表訓練

### 🎮 迷你遊戲區（可用星星遊玩）
- 入口：地圖下方的「迷你遊戲區」
- 星星機制：每次遊玩消耗 3 顆星星（從已獲得的關卡星星扣除，地圖上會即時更新）
- 目前提供三款輕鬆有趣的小遊戲：
  - 森林消消樂 🍓：8x8 水果方塊，點擊交換相鄰兩格，連成 3 個以上相同水果即可得分
  - 森林記憶王 🧠：24–36 張卡片（12–18 對），翻牌找出成對圖案，訓練觀察與記憶
  - 森林切切樂 🍉：用手指或滑鼠快速劃過水果切開得分，累積 100 分過關

### 🏆 通關後小遊戲獎勵（3 星結算可選）
- 取得方式：在任一關卡「當次挑戰」達成 3 顆星，結果畫面會出現「🌟 進入小遊戲獎勵」按鈕
- 進入後可在「通關後小遊戲」中自行選擇以下兩款遊戲：
  - 🌟 星星收集大作戰：控制籃子接住從天空掉落的星星，累積 100 分過關
  - 🎯 森林射擊戰：操作獵人射擊怪物，依不同怪物獲得/扣除分數，累積 100 分過關
- 操作方式：
  - 電腦：滑鼠/鍵盤操作（視遊戲而定）
  - 觸控：手指拖曳/點擊（視遊戲而定）
- 提示：通關後小遊戲不消耗星星，結束後可返回地圖

### 🌟 雙難度系統
- **簡單模式**：適合初學者，題目範圍較小，難度較低
- **困難模式**：適合進階學習者，題目範圍更廣，挑戰性更高

### 🎯 成就系統
- 每個關卡最多可獲得 3 顆星星
- 0 次錯誤 = 3 顆星 ⭐⭐⭐
- 1 次錯誤 = 2 顆星 ⭐⭐
- 2 次錯誤 = 1 顆星 ⭐
- 3 次錯誤 = 關卡結束

### 🔊 音效回饋
- 使用 Web Audio API 即時生成音效
- 答對時播放愉悅的上升音階
- 答錯時播放提示音並顯示正確答案
- 完成關卡時播放勝利音樂

### 📱 響應式設計 (RWD)
- 完美支援手機、平板、桌機等各種裝置
- 觸控優化，按鈕大小適合兒童點擊
- 自動調整版面配置，確保最佳使用體驗

### 💾 進度儲存
- 使用 localStorage 自動儲存每個關卡的最高星級記錄
- 關卡地圖上顯示簡單和困難模式的最佳成績
- 無需登入，資料儲存在本地瀏覽器

### ✅ 答案合理性保證
- **非負答案需求**：所有應用題答案必須為非負整數，符合小學生認知範圍
- **邏輯驗證**：題目生成時採用反向計算和雙重保護機制
- **適齡設計**：確保所有數學情境都是合理且易於理解的現實場景

## 🚀 安裝與使用

### 本地使用
1. 下載 `index.html` 檔案
2. 使用瀏覽器開啟 `index.html`
3. 開始遊戲！

### GitHub Pages 部署
1. Fork 或複製此專案到你的 GitHub 帳號
2. 進入專案的 Settings 頁面
3. 找到 "Pages" 選項
4. 在 "Source" 下拉選單中選擇 "main" 分支
5. 點擊 "Save" 儲存設定
6. 等待幾分鐘後，你的遊戲就會發布在：
   ```
   https://你的使用者名稱.github.io/專案名稱/
   ```

## 🎯 遊戲規則

1. **選擇關卡**：在地圖上點擊想要挑戰的關卡
2. **選擇難度**：選擇「簡單模式」或「困難模式」
3. **答題**：每個關卡有 10 道題目，從四個選項中選擇正確答案。若答錯，系統會顯示正確答案並自動進入下一題
4. **錯誤限制**：累計 3 次錯誤時關卡結束
5. **獲得星星**：根據錯誤次數獲得 1-3 顆星星
6. **挑戰記錄**：系統會自動記錄每個關卡的最高星級

## 🛠️ 技術規格

- **HTML5**：網頁結構
- **CSS3**：響應式設計、動畫效果、漸層色彩
- **JavaScript (ES6+)**：遊戲邏輯、題目生成、音效系統
- **Web Audio API**：即時音效生成
- **localStorage**：進度儲存

## 📋 關卡難度對照表

| 關卡 | 簡單模式 | 困難模式 |
|------|----------|----------|
| 數字魔法師 | 10 以內加減法 | 100 以內加減法 |
| 故事迷宮 | 單步驟應用題 | 兩步驟應用題 |
| 乘法探險家 | 2, 3, 4, 5 的乘法表 | 完整九九乘法表 |
| 大小魔王戰 | 兩位數比較 | 三位數比較 |
| 錢幣大富翁 | 1, 5, 10 元 | 1, 5, 10, 50, 100, 500, 1000 元 |
| 時間魔法鐘 | 5 分鐘間隔 | 1 分鐘間隔 |

### 🔥 特別練習區難度說明
| 關卡 | 練習模式 |
|------|----------|
| 九九乘法王 | 完整 2-9 九九乘法表無限練習，無錯誤限制 |

## 🔧 最新更新

### v1.2 (2024) - 新增九九乘法王關卡
- **新增關卡**：九九乘法王 🔢 - 專業九九乘法表訓練
- **關卡特色**：
  - 簡單模式：專注於 1-5 的乘法表，適合初學者建立信心
  - 困難模式：完整 1-9 九九乘法表，全面提升乘法能力
  - 智能選項生成：干擾選項採用相近的乘法結果，增加挑戰性
- **學習效果**：專門針對九九乘法表設計，與原有乘法探險家關卡形成進階學習路徑

### v1.1 (2024) - 故事迷宮優化
- **修復問題**：故事迷宮困難模式可能產生負數答案的問題
- **優化邏輯**：
  - 購物剩餘金額情境：改用反向計算，先決定剩餘金額再計算總金額
  - 書架書本數量情境：增加雙重保護機制，確保答案非負
  - 新增購物找零情境：豐富題型多樣性，答案永遠為正數
- **改善體驗**：確保所有應用題答案都是合理的正整數，符合小學生認知範圍

## 🌐 瀏覽器支援

- Chrome (推薦)
- Firefox
- Safari
- Edge
- 其他支援 ES6 和 Web Audio API 的現代瀏覽器

## 📝 授權資訊

本專案採用 MIT 授權條款。您可以自由使用、修改和分發此專案。

## 🤝 貢獻

歡迎提出問題、建議或貢獻程式碼！

## 📧 聯絡方式

如有任何問題或建議，歡迎透過 GitHub Issues 與我們聯繫。

---

**祝學習愉快！🎉**


## 🔐 管理者設定（無星星限制）

- 入口：首頁最下方「管理者設定」按鈕（僅顯示按鈕，不提供任何密碼提示）
- 安全機制：點擊後會跳出密碼輸入彈窗（輸入內容隱藏），需要輸入「今日日期」作為密碼（yyyyMMdd，本地時間）
- 驗證通過後，會顯示管理者專用選單，可直接進入以下遊戲且不消耗星星：
  - 🌟 通關後小遊戲（星星收集大作戰）
  - 🍓 森林消消樂
  - 🧠 森林記憶王
  - 🎯 森林射擊戰（新）
- 備註：此流程僅繞過星星條件與扣除，遊戲本身規則不變；一般玩家的正常入口與條件維持不變。

## 🎯 森林射擊戰（通關後小遊戲新增）

- 內容：在森林夜空場景中操控獵人射擊下落或飄動的怪物（降落速度較慢，節奏更平衡）
- 操作方式：
  - 滑鼠/觸控：在遊戲區域拖曳移動，點擊射擊
  - 鍵盤：W/A/S/D 或方向鍵移動，空白鍵射擊
- 計分規則（畫面右上角提供圖示說明）：
  - 👻 +1 分、🦇 +2 分、👹 +3 分、💀 -1 分
  - 多段擊破：🦇 需要射 2 次、👹 需要射 3 次（👹 體型較大且發光更明顯）
  - 怪物落到底部不扣分
- 目標：累積 100 分會顯示過關畫面並結束遊戲
- 視覺與體驗：
  - 放大玩家、敵人、子彈與爆炸特效，提升可視度；3 分怪更大更亮
  - 增加怪物出現頻率與多樣性（含扣分怪）

## 📱 RWD 補充：森林記憶王平板優化

- 平板橫向（≥768px）：
  - 卡片網格由 4 欄改為 6 欄排列，更符合橫向視野
  - 卡片比例由 3:4 改為 4:3（橫式卡片），並調整字級與間距
- 平板直向（768–1199px）：
  - 4 欄 × 6 列的 24 張卡片可在單一畫面完整顯示，無需捲動
  - 自動計算網格寬度以符合可視高度，並適度縮小間距與字級
- 行動裝置與桌面版仍維持原有體驗（依螢幕尺寸自適應）

## 🔧 最新更新（補充）

### v1.3 (2025) - 管理者設定與通關後小遊戲擴充
- 新增「管理者設定」按鈕：位於首頁底部，支援密碼彈窗（輸入遮蔽），密碼為當日日期（yyyyMMdd）
- 管理者專用遊戲選單：可直接進入「通關後小遊戲、森林消消樂、森林記憶王、森林射擊戰」，不消耗星星
- 新增通關後小遊戲「森林射擊戰」：
  - 怪物分數類型：👻+1、🦇+2、👹+3、💀-1，達 100 分過關
  - 加入右上角分數圖示說明與音效、爆炸特效
- 結算介面：3 星結算時新增小遊戲選擇彈窗，可於「星星收集大作戰」與「森林射擊戰」中擇一進入
- 記憶遊戲 RWD 強化：
  - 平板直向可在單一畫面顯示 24 張卡
  - 平板橫向改為 6 欄，卡片採 4:3 橫式比例
